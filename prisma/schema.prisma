// Prisma schema reflecting the specification
// Uses PostgreSQL by default; adjust the datasource URL in .env if needed.
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  CURATOR
  SCANNER
}

enum TicketStatus {
  NOT_ENTERED
  ENTERED
}

model User {
  id        String   @id @default(uuid())
  name      String
  role      Role
  createdAt DateTime @default(now())

  students  Student[]
}

model Student {
  id           String        @id @default(uuid())
  fullName     String
  className    String
  ticketNumber Int           @unique
  qrToken      String        @unique
  status       TicketStatus  @default(NOT_ENTERED)

  curatorId    String
  curator      User          @relation(fields: [curatorId], references: [id])

  createdAt    DateTime      @default(now())
  enteredAt    DateTime?
}
